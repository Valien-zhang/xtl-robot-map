<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robot Map</title>
</head>

<body>
    <div id="map-container" style="width: 100%; height: 100vh;"></div>
    <script src="https://unpkg.com/react/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom/umd/react-dom.development.js"></script>
    <!-- <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script> -->
    <!-- 引入 MobX 和 MobX React Lite 的 UMD 版本 -->
    <script src="dist/robotMap.umd.js"></script>
    <!-- 直接在 script 标签中嵌入 JSON 数据 -->
    <script id="static-data" type="application/json">
        {
            "mapId": 1,
            "name": "",
            "saved": 1,
            "full": 1,
            "status": 1,
            "angle": 0,
            "index": 0,
            "ts": 1230674396,
            "mapData": "eyJleHBhbmRlZCI6MCwidG90YWxXaWR0aCI6ODAwLCJ0b3RhbEhlaWdodCI6ODAwLCJ3aWR0aCI6MTQ5LCJoZWlnaHQiOjE1NiwieE1pbiI6MzQwLCJ5TWF4IjozNDAsInJlc29sdXRpb24iOjUsIm1hcCI6Ikh3QUJBTGtTQkFFQUQ5TUFlZ0tUQUErV0FId0JrUUFHQWdBUE1RRnpCcEFBQVFJQUQ1VUEvLy8vLzRvUkFKOEVCUUlBRDZnRWN3K1ZBUDhtRDc0QmRBcS9BUStWQUdBeUJBUUJBUUFJZkFBRjVBSUFBZ0FJR1FBUEFnQlVBSlVBQUhzQUNUNEpBUThBQkFJQUQ0a0FWQWdDQUFSN0FBK1ZBSVVWQkswQUFhUUFCQUlBQlJZQUR3SUFWd1I3QUFBQ0FBVjJBQUFOQUFRQ0FBVVZBQThDQUZnRWZBQUFBZ0FGZHdBQURRQUVBZ0FGRlFBUEFnQlpCSDBBQUFJQUJIZ0FBQXdBQkFJQUJCUUFEd0lBV3dSK0FBVlZBaFVCa0FNQUFnQnZBQVFFQXdNRGt3QmJDWlVBQXE0RUFJc0FCZ0lBRDVVQVl3YkFCUUZHQlErVkFIUUdsZ0F4QkFRQkd3RUlBZ0FQS2dFSkVBTUJBQUJ1QVE4Q0FFQUloQUFCaGdBTEFnQVBld0FGQUJnQUQ1VUFSZ2dyQVErVkFBVUFBZ0FMRUFFQUV3QTdBd01CRmdBUEFnQTJBSXdBRHdJQUNBQjhBQUFDQUFOd0FBQUxBQUNQQXdFSUFBK1ZBRWNLS3dFSUFnQVFBQjhFQW40QUJKVUFBQW9BWUFNREFBRUJBUWdBRDVVQVNBK1dBQWN2QVFTVkFBTUZBZ0FQdndGR0NzRUJEYUlBQklFQUFDa0FGQUFOQUFRQ0FBRVZBQThDQUVRSXRBRUxBZ0FVQVlrQUFIc0FCSXdBQkFJQUFCUUFEd0lBUmd1SkFBVUNBQUIwQmdJOUFnOENBQUFRQWZBQ0R3SUFTUVdIQUE0Q0FBK1BBQUFDQWdBQUFBWUhBZ0FERWdZUEFnQTREb3dBQlFJQUFvSUFEd0lBQVEvbUFrZ0NBZ0FGaEFBTkFnQVBqd0FCQWdJQUQ1VUFUZzExQXdVQ0FBS0JBQThDQUFJQzBBQVBBZ0JJQllVQURBSUFENDhBQWdBQ0FBK05BRWdGQWdBRWpRQU1OQUVBZ0FBUEFnQUFBTmdDQlR3QUR3SUFSZ1NWQUF3Q0FBK1JBQUFBQWdBQmFRWVBWZ0ptQUlJQUR3SUFCUStWQU9RTVRRSURBZ0FQSmdFRkFBSUFBZTRGRDFFQ1JnRUNBQU9HQUFzQ0FBQjlBQThDQUFvQlBBQVBBZ0JIQzQ4QUFnSUFENUVBQ2dBQ0FBK1FBRWNCQWdBQ2hnQUxBZ0FBZUFBUEFnQUtBVHNBRHdJQVJ3dVBBQUlDQUErUkFBb0FBZ0FQa0FCSEFnSUFBb2NBQ2dJQUFIZ0FEd0lBQmdJM0FBOENBRXNCandBTGhnTVBrUUFHQWtFTUR3SUFVUUdYQUFrQ0FBRitBQThDQUFNUGtRQlJBQUlBQ1pBQUFRSUFENUFBQXdNQ0FBQXpBQThDQUU4QmlBQUpBZ0FEZndBUEFnQURENUVBVHdBQ0FBbVFBQUVDQUErT0FBTURBZ0FQS2doUkQ1VUFIZytPRGtZQWNnNFBBZ0FJQXhRQkR3SUFCUURLQUE4Q0FFQUprUUFMRHdBSElnOFBBZ0FFRDVFQVFBQUNBQUY3QUFVQ0FBdW1CQThxQVhJQ1FCQUNBZ0FDb0FBUElnRUVCQUlBQU5jQUR3SUFRQXBVQWdCcEVRTUNBQStWQUJFUGtBQkFBUUlBQUp3UEE0Y0FBRUFhQkFzQUJBSUFCQk1CQkFJQUFBVVNCVllRQVVFQUR3SUFRUVIrQUE4Q0FBSVFBYk1XQ0FJQUFwb0VCQklBRDVBQVFRRUNBQStOQUFJREFnQWZBWlVBQXcrVUFFNENPZ0lQQWdBQkF0Z0JCSUVBQkFJQUFMOEJCQUlBQWRVQUR3SUFRdytSQUFFR0FnQUVnUUFFQWdBQjhRMERBZ0FQa0FCREF3SUFCb01BSFFRNUFRT0FBQThDQUFJRFB3QVBBZ0JEQjVVQURRSUFENDRBQWdNQ0FBK09BRU1EQWdBTmlnQUhBZ0FEZ0FBT0FnQVBIdzlOQjRRQURRSUFEbzRBQXdJQUFoMEVEd0lBU0EyTEFBWUNBQU9EQUE4Q0FBQVBLd0ZOQVFJQUJva0FDQUlBRDQ0QUFBTUNBQStWQUZJR2JnWUlBZ0FEZ2dBT0FnQVB2d0ZPQVFJQUQ1VUFIUTlrRFZJUGxRQWNBQUlBQWMwQUR3SUFPZ0dsQVFkU0FBK1ZBQ0FBcGdzUFd3STdDNVVBRHJZSUFRSUFBWG9BRHdJQUNRK1ZBSUlQMGd3N0FRa0JBQUlBQXNNQkR5b0JKUTlhQWpzQWtBQUJBZ0FEbFFBQkRBQU5BZ0FBZGdBUEFnQU1Ba0FBRHdJQU53V0VBQThvQVFRUGxRQU5EL1lVUWdCM0FBQUNBQTk2QXdNQUFnQVBKZ0VKQTF3SkR5UUJOd0lDQUFCM0FBOENBQXNQbFFBSEQ5TUZTUStVQUFzTU9Rd0ZBZ0FQa3dCSEQ1RUFEQUFDQUFXR0FBZ0NBQjhCa3dCSEQ1VUFKZzh3QlRzTUFnQUFDd0VQQWdBTUNDRUJCQUlBRDVVQVF3K0pBQXdJQWdBRWlRQUhBZ0FNMndBUEFnQTBDSFlBRHdJQURBZU5BQStzQ0VzUGlBQU1DUUlBQVl3QUJBSUFEN2dCUXdJQ0FBbDJBQThDQUF3RWtBQUJBZ0FQbFFEL0ZoOEJwZ2c3Q3dJQUQ3SUJEQWtDQUFHM0FRRUNBQjhCbFFCTEQyd1JDUXdDQUFHUUFBRUNBQTlSQWtrQ0FnQUF3eDhFQWdBTWlBQUpBZ0FCa0FBQkFnQVBXd1pKRFFJQUQ3Y0lCd0FDQUFHUUFBRUNBQStWQUlJUHVRdzlEd0lBQ2c4cUFSVUFmd01QV2dKUkFRSUFENVVBR0I4QmxRQ0FBSllBRDRRRFR3RUNBQThxQVJjQUFnQVBsUUNDRDlZRlNnWUNBQThxQVJzUEd3UlVENVVBSFEvREFWSVBsUUFmRDhNQlVBK1ZBQ0VBc2dRUDZDbEpBQnd2RHdJQUNBQ3ZBUTBDQUFHVUFBUUNBQWFlQWc4Q0FEWVBzdzhKQUFJQUJIc0FDQUlBQ0tBWkQ1VUFRQUIzQUE4Q0FBc0Fkd0FQQWdBTEQ3b0VPUStNQUFzRkFnQVBrUUFMQUFJQUQ1VUFPQVYyQUE4Q0FBd0Fkd0FQQWdBTEQ1VUEveGdQNndJMkQ3UUJEQWNDQUFCMUFBOENBQkFQRGdRdEIzSUFEd0lBRUErUkFCQUNBZ0FQbHdBbkQ0WUFFQXNDQUFKeUFBOENBQkFQbFFDQ0FnSUFENXNBSVFzSEFROENBQkFDYkFBUEFnQVlENWNBSHcrR0FCQUxBZ0FQandBWUJRSUFENWdBR2d0d0FBOENBQklGYWdBUEFnQVpENVlBR0ErRkFCSU1BZ0FQakFBWkJRSUFENVVBRnd4dkFBOENBQk1GYVFBUEFnQWNENWdBRXcrRUFCTU5BZ0FQakFBY0J3SUFENWNBRVExdkFBOENBQk1IWmdBUEFnQWZENWdBRGcrRUFCTU5BZ0FQaWdBZkNBSUFENVlBRFExdkFBOENBQk1JWXdBUEFnQWZENVVBb2czd0l3OENBQk1QSGdFZkNRSUFEeXNCUXdsakFBOENBQjhQbFFBTkR5c0JJdytJQUI4TEFnQVBsd0FNRDdBQkV3c0NBQXRqQUE4Q0FCOFBsUUFNRHlzQklnK0dBQjhMQWdBUGxRQU5ENVlBSVF0akFBOENBQjhQbFFDakR5c0JJQThiQVI4TEFnQVBLZ0VPRDVVQWd3Z0NBQXRuQXc4Q0FBUUwrQUFQQWdBZkNITUFEd0lBRGcrRkFBUU1BZ0FQaGdBZkN3SUFENGtBRGdnQ0FBeCtBQThDQUFRTFl3QVBBZ0FmQ0hRQUR3SUFEUStFQUFRTkFnQVBoZ0FmQ3dJQUQ0a0FEUWNDQUExOUFBOENBQVVMWXdBUEFnQWVCM1FBRHdJQURRK0RBQVVPQWdBUGhnQWVDd0lBRDRvQURRWUNBQTU4QUE4Q0FBWUxaQUFQQWdBZEJuUUFEd0lBRFErQ0FBWVBBZ0FBRDRZQUhRd0NBQStNQUEwRUFnQVBld0FBRHdJQUJ3eGxBQThDQUI4RWR3QVBBZ0FMRDRJQUJ3OENBQUFQaFFBZkRRSUFENDRBQ3dJQ0FBOTZBQUFQQWdBSUFXa2VEV2dBRHdJQUhBSjVBQThDQUFnUGdRQUlEd0lBQVFBNkhnK1dBRTRQZVFBQkR3SUFDZzhRUkFBUEFnQWhEeWNCQ0ErVkFHY1B5aGtLRHhZQkNnOENBQUVQS2dFMEQ1VUFPZ0JlQVErdkFTRU5BZ0FBU1FBUEFnQUZBVTREQXVrbkRoZ0JBQmdBQ3hZQUFFZ0FBMHNiRHdJQUNRQW5BQUlDQUE4bUFBVUNIZ0FQQWdBT0FaMEFDUUlBQURNQUNSRUFBaE1BRGhZQURRSUFBU1VBQVFJQURSc0FBd0lBVUFBQUFBQUEiLCJsejRMZW4iOjIzMjQ0LCJkaXJlY3Rpb24iOjEsImNoYXJnZVBvcyI6IntcInhcIjowLFwieVwiOjAsXCJhXCI6MTgwMDB9In0=",
            "areas": "[{\"id\":2,\"name\":\"餐厅2\",\"type\":\"6\",\"centerX\":368,\"centerY\":391,\"room_id\":4,\"neibs_size\":1,\"neibs\":\"3\"},{\"id\":1,\"name\":\"\",\"type\":\"\",\"centerX\":355,\"centerY\":433,\"room_id\":3,\"neibs_size\":1,\"neibs\":\"4\"}]",
            "virtualWalls": "",
            "mopWalls": ""
        }
    </script>
    <script>
        if (window.indexedDB) {
            console.log("IndexedDB is supported.");
        } else {
            console.log("IndexedDB is not supported.");
        }
        // 解析嵌入的 JSON 数据
        const jsonDataStr = document.getElementById('static-data').textContent;
        // 显示或使用 JSON 数据
        // const contentDiv = document.getElementById('content');

        // 使用 MapView 组件
        const mapContainer = document.getElementById('map-container');
        ReactDOM.render(
            React.createElement(robotMap, {
                // 传递其他必要的 props
                mapInfo: JSON.parse(jsonDataStr),
                // virtualData:{ mapStore.curMapInfo.virtualWalls }
                // mopWallData:{ mapStore.curMapInfo.mopWalls }
                // selectedAreas:{ store.selectedAreas }
                // virtualZones:{ store.zones }
                // onClickArea:{ onClickArea }
                // onVirtualZonesChange:{ onVirtualZonesChange }
                // stationStatus:{ robotStore.stationStatus }
                // mapLoadEnd:{mapLoadEnd}
                uiConfig:
                {
                    // 禁区、基站、主机
                    // 轨迹只需要展示清洁轨迹以及清洁过程中房间内导航轨迹线，其他的轨迹都不需要展示
                    isShowPileRin: true, // 是否显示禁区
                    isInBaseStation: true, // 当前地图是否在基站
                    isShowCurPosRing: true, // 是否显示机器人当前位置
                    isShowBaseRing: true, // 是否显示基站ring
                    isShowTrace: true, // 是否显示轨迹
                    isShowCarpet: true, // 是否显示地毯
                    isShowAreaTips: true, // 是否显示房间标记
                    areaTipType: '',
                    isSupportPanZoom: true, // 是否可缩放
                    isSupportSelectArea: true, // 是否可选房间 
                    isShowZoning: true,
                    isEditZoning: true// 是否划区可编辑 (禁区 划区 等)
                }
            }
            ),
            mapContainer
        );
    </script>
</body>

</html>